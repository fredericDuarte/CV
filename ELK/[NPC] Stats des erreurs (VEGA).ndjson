{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"title":"[NPC]  Stats des erreurs (VEGA)","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"[NPC]  Stats des erreurs (VEGA)\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\r\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega/v5.json\\\",\\r\\n  \\\"description\\\": \\\"An example of Cartesian layouts for a node-link diagram of hierarchical data.\\\",\\r\\n  \\\"width\\\": 600,\\r\\n  \\\"height\\\": 500,\\r\\n  \\\"padding\\\": 5,\\r\\n  \\\"autosize\\\":\\\"none\\\"\\r\\n\\r\\n  \\\"signals\\\": [\\r\\n    {\\r\\n      \\\"name\\\": \\\"labels\\\", \\\"value\\\": true,\\r\\n      \\\"bind\\\": {\\\"input\\\": \\\"checkbox\\\"}\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"layout\\\", \\\"value\\\": \\\"tidy\\\",\\r\\n      \\\"bind\\\": {\\\"input\\\": \\\"radio\\\", \\\"options\\\": [\\\"tidy\\\", \\\"cluster\\\"]}\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"links\\\", \\\"value\\\": \\\"diagonal\\\",\\r\\n      \\\"bind\\\": {\\r\\n        \\\"input\\\": \\\"select\\\",\\r\\n        \\\"options\\\": [\\\"line\\\", \\\"curve\\\", \\\"diagonal\\\", \\\"orthogonal\\\"]\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"separation\\\", \\\"value\\\": false,\\r\\n      \\\"bind\\\": {\\\"input\\\": \\\"checkbox\\\"}\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\\"data\\\": [\\r\\n       {\\r\\n      \\\"name\\\": \\\"tree\\\",\\r\\n      %context%: true,\\r\\n      %timefield%: timestamp,\\r\\n      \\\"url\\\": {\\r\\n         \\\"index\\\": \\\"al_zud_p0281_s0638_errorlog\\\" ,\\r\\n         \\\"body\\\":{\\r\\n                   \\\"aggs\\\": {\\r\\n                    \\\"table\\\": {\\r\\n                      \\\"composite\\\": {\\r\\n                        \\\"sources\\\": [\\r\\n                         {\\\"level\\\": {\\\"terms\\\": {\\\"field\\\": \\\"level.keyword\\\"  }}},\\r\\n                         {\\\"adabo\\\": {\\\"terms\\\": {\\\"field\\\": \\\"adabo.keyword\\\" }}},\\r\\n                         {\\\"hostname\\\":{\\\"terms\\\":{\\\"field\\\": \\\"host.name.keyword\\\"}}}\\r\\n                       #,{\\\"message\\\":{\\\"terms\\\":{\\\"field\\\": \\\"messageLog.keyword\\\"}}}\\r\\n                       # ,{\\\"painless\\\":{\\\"terms\\\":{\\\"field\\\": \\\"messageLogSplit\\\"}}}\\r\\n                          \\r\\n                        ]\\r\\n                      },\\r\\n                       \\\"aggs\\\" : \\r\\n                              { \\\"order\\\": { \\\"terms\\\": {\\\"field\\\": \\\"messageLog.keyword\\\"  , \\\"size\\\" : 1 }}}\\r\\n                   }\\r\\n         \\r\\n                  }\\r\\n         \\r\\n              }\\r\\n  \\r\\n      },\\r\\n      \\\"format\\\": {\\r\\n        property: \\\"aggregations.table.buckets\\\"\\r\\n      },\\r\\n      \\\"transform\\\": [\\r\\n         {\\r\\n           \\\"type\\\":\\\"flatten\\\",\\r\\n           \\\"fields\\\":[\\\"order.buckets\\\"],\\r\\n           \\\"as\\\": [\\\"thenews\\\"]\\r\\n         },\\r\\n         \\r\\n\\r\\n         {\\r\\n          \\\"type\\\": \\\"project\\\",\\r\\n          \\\"fields\\\": [ \\r\\n            \\\"key.level\\\",\\r\\n            \\\"key.adabo\\\",\\r\\n            \\\"key.hostname\\\"\\r\\n            #,\\\"key.message\\\"\\r\\n            ,\\\"thenews\\\"\\r\\n          ],\\r\\n          \\\"as\\\": [\\r\\n            \\\"error\\\",\\r\\n            \\\"adab\\\",\\r\\n            \\\"hostname\\\",\\r\\n            \\\"message\\\"\\r\\n          ]\\r\\n        },\\r\\n\\r\\n        {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          #\\\"expr\\\": \\\"split(datum.message,regexp(/(?<=.[a-zA-Z0-9_]{5,}):|\\\\\\\\s\\\\\\\\[/),3)\\\",\\r\\n          \\\"expr\\\": \\\"datum.error!='WARN'? (split(datum.message.key,regexp(/(?<=.[a-zA-Z0-9_]{5,}):|\\\\\\\\s\\\\\\\\[/),3)) : (split(datum.message.key,regexp(/(?<=.[a-zA-Z0-9_]{5,})\\\\\\\\s/),3)) \\\",\\r\\n          \\\"as\\\": \\\"split1\\\"\\r\\n        },\\r\\n\\r\\n         {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"split(datum.split1[0],regexp(/(?=\\\\\\\\.[^.]+$)./),3)\\\",\\r\\n          \\\"as\\\": \\\"split2\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          \\\"expr\\\" :\\\"datum.split2[1]\\\",\\r\\n          #\\\"expr\\\":\\\"datum.painless\\\",\\r\\n          \\\"as\\\": \\\"errorInfo\\\"\\r\\n           \\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          \\\"expr\\\" :\\\"datum.message.doc_count\\\",\\r\\n          \\\"as\\\": \\\"doCount\\\"\\r\\n           \\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"nest\\\",\\r\\n          \\\"generate\\\": \\\"true\\\",\\r\\n          \\\"keys\\\": [\\\"error\\\",\\\"adab\\\", \\\"hostname\\\"]\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"tree\\\",\\r\\n          \\\"method\\\": {\\\"signal\\\": \\\"layout\\\"},\\r\\n          \\\"size\\\": [{\\\"signal\\\": \\\"height\\\"}, {\\\"signal\\\": \\\"width-150\\\"}],\\r\\n          \\\"as\\\": [\\\"y\\\", \\\"x\\\", \\\"depth\\\", \\\"children\\\"]\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"links\\\",\\r\\n      \\\"source\\\": \\\"tree\\\",\\r\\n      \\\"transform\\\": [\\r\\n        { \\\"type\\\": \\\"treelinks\\\" },\\r\\n        {\\r\\n          \\\"type\\\": \\\"linkpath\\\",\\r\\n          \\\"orient\\\": \\\"horizontal\\\",\\r\\n          \\\"shape\\\": {\\\"signal\\\": \\\"links\\\"}\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"tree-boxes\\\",\\r\\n      \\\"source\\\": \\\"tree\\\",\\r\\n      \\\"transform\\\": [\\r\\n          { \\r\\n            \\\"type\\\": \\\"filter\\\",\\r\\n            \\\"expr\\\": \\\"datum.key != null \\\"\\r\\n          },\\r\\n          { \\r\\n            \\\"type\\\": \\\"filter\\\",\\r\\n            \\\"expr\\\": \\\"datum.children != null\\\"\\r\\n          }\\r\\n        ]\\r\\n    }\\r\\n\\r\\n  ],\\r\\n\\r\\n  \\\"scales\\\": [\\r\\n    {\\r\\n      \\\"name\\\": \\\"color\\\",\\r\\n      \\\"type\\\": \\\"linear\\\",\\r\\n      \\\"range\\\": {\\\"scheme\\\": \\\"magma\\\"},\\r\\n      \\\"domain\\\": {\\\"data\\\": \\\"tree\\\", \\\"field\\\": \\\"depth\\\"},\\r\\n      \\\"zero\\\": true\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\\"marks\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"path\\\",\\r\\n      \\\"from\\\": {\\\"data\\\": \\\"links\\\"},\\r\\n      \\\"encode\\\": {\\r\\n        \\\"update\\\": {\\r\\n          \\\"path\\\": {\\\"field\\\": \\\"path\\\"},\\r\\n          \\\"stroke\\\": {\\\"value\\\": \\\"#ccc\\\"}\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n     {\\r\\n      \\\"type\\\": \\\"symbol\\\",\\r\\n      \\\"from\\\": {\\\"data\\\": \\\"tree\\\"},\\r\\n      \\\"encode\\\": {\\r\\n        \\\"enter\\\": {\\r\\n          \\\"size\\\": {\\\"value\\\": 70},\\r\\n          \\\"stroke\\\": {\\\"value\\\": \\\"#fff\\\"}\\r\\n        },\\r\\n        \\\"update\\\": {\\r\\n          \\\"x\\\": {\\\"field\\\": \\\"x\\\"},\\r\\n          \\\"y\\\": {\\\"field\\\": \\\"y\\\"},\\r\\n          \\\"fill\\\": {\\\"scale\\\": \\\"color\\\", \\\"field\\\": \\\"depth\\\"}\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n\\r\\n\\r\\n    {\\r\\n      \\\"type\\\": \\\"text\\\",\\r\\n      \\\"from\\\": {\\\"data\\\": \\\"tree\\\"},\\r\\n      \\\"encode\\\": {\\r\\n        \\\"enter\\\": {\\r\\n          \\\"text\\\": {\\r\\n            \\\"signal\\\":\\\"datum.key!=null ? datum.key  : datum.errorInfo +'  ['+ datum.doCount  +']'\\\"\\r\\n             }, \\r\\n          \\\"fontSize\\\": {\\\"value\\\": 10},\\r\\n          \\\"baseline\\\": {\\\"value\\\": \\\"bottom\\\"},\\r\\n        },\\r\\n        \\\"update\\\": {\\r\\n          \\\"x\\\": {\\\"field\\\": \\\"x\\\"},\\r\\n          \\\"y\\\": {\\\"field\\\": \\\"y\\\", \\\"type\\\":\\\"\\\"},\\r\\n          \\\"dx\\\": {\\\"signal\\\": \\\"datum.children ? 15 : 7\\\"},\\r\\n          \\\"dy\\\": {\\\"signal\\\": \\\"datum.children ? -12 : 5\\\"},\\r\\n          \\\"align\\\": {\\\"signal\\\": \\\"datum.children ? 'right' : 'left'\\\"},\\r\\n          \\\"opacity\\\": {\\\"signal\\\": \\\"1\\\"}\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  ]\\r\\n}\"}}"},"coreMigrationVersion":"7.13.4","id":"4528c540-0a3f-11ec-80a8-c3deeb2895d8","migrationVersion":{"visualization":"7.13.1"},"references":[],"type":"visualization","updated_at":"2021-09-08T09:23:12.723Z","version":"WzY2NjE1LDRd"}
{"exportedCount":1,"missingRefCount":0,"missingReferences":[]}