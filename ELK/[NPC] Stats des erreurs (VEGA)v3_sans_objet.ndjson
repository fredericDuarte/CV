{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"title":"[NPC] Stats par erreur","uiStateJSON":"{}","version":1,"visState":"{\"aggs\":[],\"params\":{\"spec\":\"{\\r\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega/v5.json\\\",\\r\\n  \\\"description\\\": \\\"An example of Cartesian layouts for a node-link diagram of hierarchical data.\\\",\\r\\n  \\\"width\\\": 1200,\\r\\n  \\\"height\\\": 1500,\\r\\n  \\\"padding\\\": 5,\\r\\n  \\\"autosize\\\":\\\"none\\\"\\r\\n\\r\\n  \\\"data\\\": [\\r\\n       {\\r\\n      \\\"name\\\": \\\"tree\\\",\\r\\n\\r\\n      \\\"url\\\": {\\r\\n         %context%:\\\"true\\\",\\r\\n\\r\\n         \\\"index\\\": \\\"al_zud_p0281_s0638_errorlog\\\" ,\\r\\n         \\\"body\\\":{\\r\\n                   \\\"aggs\\\": {\\r\\n                    \\\"table\\\": {\\r\\n                      \\\"composite\\\": {\\r\\n                        \\\"sources\\\": [\\r\\n                         {\\\"level\\\": {\\\"terms\\\": {\\\"field\\\": \\\"level.keyword\\\"  }}},\\r\\n                         {\\\"adabo\\\": {\\\"terms\\\": {\\\"field\\\": \\\"adabo.keyword\\\" }}},\\r\\n                         {\\\"hostname\\\":{\\\"terms\\\":{\\\"field\\\": \\\"host.name.keyword\\\"}}}\\r\\n                        ]\\r\\n                      },\\r\\n                       \\\"aggs\\\" : \\r\\n                              { \\\"messageLog\\\": { \\\"terms\\\": {\\\"field\\\": \\\"messageLog.keyword\\\"  ,\\r\\n                              \\r\\n                              # \\\"size\\\" : 1 \\r\\n                              }}}\\r\\n                   }\\r\\n         \\r\\n                  }\\r\\n         \\r\\n              }\\r\\n  \\r\\n      },\\r\\n      \\\"format\\\": {\\r\\n        property: \\\"aggregations.table.buckets\\\"\\r\\n      },\\r\\n      \\\"transform\\\": [\\r\\n         {\\r\\n           \\\"type\\\":\\\"flatten\\\",\\r\\n           \\\"fields\\\":[\\\"messageLog.buckets\\\"],\\r\\n           \\\"as\\\": [\\\"messageLogKey\\\"]\\r\\n         },\\r\\n         \\r\\n\\r\\n         {\\r\\n          \\\"type\\\": \\\"project\\\",\\r\\n          \\\"fields\\\": [ \\r\\n            \\\"key.level\\\",\\r\\n            \\\"key.adabo\\\",\\r\\n            \\\"key.hostname\\\"\\r\\n            ,\\\"messageLogKey\\\"\\r\\n          ],\\r\\n          \\\"as\\\": [\\r\\n            \\\"level\\\",\\r\\n            \\\"adabo\\\",\\r\\n            \\\"hostname\\\",\\r\\n            \\\"message\\\"\\r\\n          ]\\r\\n        },\\r\\n        \\r\\n        {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"(split(datum.message.key,regexp(/(?<=.[a-zA-Z0-9_]{5,}):|\\\\\\\\s\\\\\\\\[/),3))\\\"\\r\\n          \\\"as\\\": \\\"split0\\\"\\r\\n        },\\r\\n\\r\\n        {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.split0.length > 1 ? datum.split0 : (split(datum.message.key,regexp(/(?<=.[a-zA-Z0-9_]{5,})\\\\\\\\s/),3))\\\",\\r\\n          \\\"as\\\": \\\"split1\\\"\\r\\n        },\\r\\n\\r\\n         {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"split(datum.split1[0],regexp(/(?=\\\\\\\\.[^.]+$)./),3)\\\",\\r\\n          \\\"as\\\": \\\"split2\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          \\\"expr\\\" :\\\"datum.split2[1]\\\",\\r\\n          \\\"as\\\": \\\"errorInfo\\\"\\r\\n           \\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\" : \\\"formula\\\",\\r\\n          \\\"expr\\\" :\\\"datum.message.doc_count\\\",\\r\\n          \\\"as\\\": \\\"doCount\\\"\\r\\n           \\r\\n        },\\r\\n       {\\r\\n          \\\"type\\\": \\\"aggregate\\\",\\r\\n          \\\"fields\\\":[\\\"doCount\\\"],\\r\\n          \\\"groupby\\\": [\\\"adabo\\\",\\\"level\\\", \\\"hostname\\\",\\\"errorInfo\\\"],\\r\\n          \\\"ops\\\":[\\\"sum\\\"]\\r\\n        },\\r\\n        \\r\\n         {\\r\\n          \\\"type\\\": \\\"nest\\\",\\r\\n          \\\"generate\\\": \\\"true\\\",\\r\\n          \\\"keys\\\": [\\\"adabo\\\",\\\"level\\\", \\\"hostname\\\"]\\r\\n        },\\r\\n        \\r\\n        {\\r\\n          \\\"type\\\": \\\"tree\\\",\\r\\n          \\\"size\\\": [{\\\"signal\\\": \\\"height\\\"}, {\\\"signal\\\": \\\"width-400\\\"}],\\r\\n          \\\"separation\\\": {\\\"signal\\\": \\\"true\\\"},\\r\\n          \\\"as\\\": [\\\"y\\\", \\\"x\\\", \\\"depth\\\", \\\"children\\\"]\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"links\\\",\\r\\n      \\\"source\\\": \\\"tree\\\",\\r\\n      \\\"transform\\\": [\\r\\n        { \\\"type\\\": \\\"treelinks\\\" },\\r\\n          {\\r\\n            \\\"type\\\": \\\"linkpath\\\",\\r\\n            \\\"orient\\\": \\\"horizontal\\\",\\r\\n            \\\"shape\\\": \\\"diagonal\\\"\\r\\n          }\\r\\n      ]\\r\\n    }\\r\\n\\r\\n  ],\\r\\n\\r\\n  \\\"scales\\\": [\\r\\n    {\\r\\n      \\\"name\\\": \\\"color\\\",\\r\\n      \\\"type\\\": \\\"linear\\\",\\r\\n      \\\"range\\\": {\\\"scheme\\\": \\\"magma\\\"},\\r\\n      \\\"domain\\\": {\\\"data\\\": \\\"tree\\\", \\\"field\\\": \\\"depth\\\"},\\r\\n      \\\"zero\\\": true\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\\"marks\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"path\\\",\\r\\n      \\\"from\\\": {\\\"data\\\": \\\"links\\\"},\\r\\n      \\\"encode\\\": {\\r\\n        \\\"update\\\": {\\r\\n          \\\"path\\\": {\\\"field\\\": \\\"path\\\"},\\r\\n          \\\"stroke\\\": {\\\"value\\\": \\\"#ccc\\\"}\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n     {\\r\\n      \\\"type\\\": \\\"symbol\\\",\\r\\n      \\\"from\\\": {\\\"data\\\": \\\"tree\\\"},\\r\\n      \\\"encode\\\": {\\r\\n        \\\"enter\\\": {\\r\\n          \\\"size\\\": {\\\"value\\\": 70},\\r\\n          \\\"stroke\\\": {\\\"value\\\": \\\"#fff\\\"}\\r\\n        },\\r\\n        \\\"update\\\": {\\r\\n          \\\"x\\\": {\\\"field\\\": \\\"x\\\"},\\r\\n          \\\"y\\\": {\\\"field\\\": \\\"y\\\"},\\r\\n          \\\"fill\\\": {\\\"scale\\\": \\\"color\\\", \\\"field\\\": \\\"depth\\\"}\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n\\r\\n\\r\\n    {\\r\\n      \\\"type\\\": \\\"text\\\",\\r\\n      \\\"from\\\": {\\\"data\\\": \\\"tree\\\"},\\r\\n      \\\"encode\\\": {\\r\\n        \\\"enter\\\": {\\r\\n          \\\"text\\\": {\\r\\n            \\\"signal\\\":\\\"datum.key!=null ? datum.key  : datum.errorInfo +'  ['+ datum.sum_doCount  +']'\\\"\\r\\n             }, \\r\\n          \\\"fontSize\\\": {\\\"value\\\": 10},\\r\\n          \\\"baseline\\\": {\\\"value\\\": \\\"bottom\\\"},\\r\\n        },\\r\\n        \\\"update\\\": {\\r\\n          \\\"x\\\": {\\\"field\\\": \\\"x\\\"},\\r\\n          \\\"y\\\": {\\\"field\\\": \\\"y\\\", \\\"type\\\":\\\"\\\"},\\r\\n          \\\"dx\\\": {\\\"signal\\\": \\\"datum.children ? 15 : 7\\\"},\\r\\n          \\\"dy\\\": {\\\"signal\\\": \\\"datum.children ? -12 : 5\\\"},\\r\\n          \\\"align\\\": {\\\"signal\\\": \\\"datum.children ? 'right' : 'left'\\\"},\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  ]\\r\\n}\"},\"title\":\"[NPC] Stats par erreur\",\"type\":\"vega\"}"},"coreMigrationVersion":"7.13.4","id":"9cc3ec60-1095-11ec-80a8-c3deeb2895d8","migrationVersion":{"visualization":"7.13.1"},"references":[],"type":"visualization","updated_at":"2021-09-15T09:52:05.771Z","version":"WzExNTczMyw2XQ=="}
{"exportedCount":1,"missingRefCount":0,"missingReferences":[]}